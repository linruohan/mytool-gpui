# é€šçŸ¥ç³»ç»Ÿä¼˜åŒ–æ€»ç»“

## âœ… å®Œæˆçš„å·¥ä½œ

### 1. åˆ›å»ºç»Ÿä¸€çš„é€šçŸ¥ç³»ç»Ÿ

åˆ›å»ºäº† `crates/mytool/src/core/notification.rs`ï¼Œæä¾›ï¼š

- **NotificationSystem** - æ ¸å¿ƒé€šçŸ¥ç±»
  - `info()` - ä¿¡æ¯é€šçŸ¥
  - `success()` - æˆåŠŸé€šçŸ¥ï¼ˆå¸¦ âœ“ å›¾æ ‡ï¼‰
  - `warning()` - è­¦å‘Šé€šçŸ¥ï¼ˆå¸¦ âš  å›¾æ ‡ï¼‰
  - `error()` - é”™è¯¯é€šçŸ¥ï¼ˆå¸¦ âœ— å›¾æ ‡ï¼‰
  - `debug()` - ä»…æ—¥å¿—ï¼Œä¸æ˜¾ç¤ºé€šçŸ¥
  - `log_error()` - è®°å½•é”™è¯¯ä½†ä¸æ˜¾ç¤ºé€šçŸ¥
  - `log_warning()` - è®°å½•è­¦å‘Šä½†ä¸æ˜¾ç¤ºé€šçŸ¥

- **NotificationExt trait** - Window æ‰©å±•æ–¹æ³•
  - `notify_info()` - ä¾¿æ·çš„ä¿¡æ¯é€šçŸ¥
  - `notify_success()` - ä¾¿æ·çš„æˆåŠŸé€šçŸ¥
  - `notify_warning()` - ä¾¿æ·çš„è­¦å‘Šé€šçŸ¥
  - `notify_error()` - ä¾¿æ·çš„é”™è¯¯é€šçŸ¥

### 2. é›†æˆåˆ° item_info.rs

åœ¨ `item_info.rs` ä¸­åº”ç”¨äº†æ–°çš„é€šçŸ¥ç³»ç»Ÿï¼š

- âœ… æé†’æ·»åŠ /åˆ é™¤æ—¶æ˜¾ç¤ºæˆåŠŸé€šçŸ¥
- âœ… æé†’é”™è¯¯æ—¶æ˜¾ç¤ºé”™è¯¯é€šçŸ¥
- âœ… æ ‡ç­¾æ“ä½œä½¿ç”¨æ—¥å¿—è®°å½•ï¼ˆåå°æ“ä½œï¼‰
- âœ… æ‰€æœ‰æ“ä½œéƒ½åŒæ—¶è®°å½•æ—¥å¿—

### 3. åˆ›å»ºæ–‡æ¡£

- âœ… `é€šçŸ¥ç³»ç»Ÿä½¿ç”¨æŒ‡å—.md` - è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£
- âœ… `é€šçŸ¥ç³»ç»Ÿç¤ºä¾‹.rs` - 5ä¸ªå®é™…ä½¿ç”¨åœºæ™¯ç¤ºä¾‹
- âœ… `item_info_ä¼˜åŒ–å»ºè®®.md` - ç»„ä»¶ä¼˜åŒ–å»ºè®®

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### ç»Ÿä¸€æ¥å£

```rust
// ä¸€ä¸ªè°ƒç”¨åŒæ—¶å®Œæˆæ—¥å¿—è®°å½•å’ŒUIé€šçŸ¥
window.notify_success("Item saved", cx);

// æ—¥å¿—è¾“å‡º: INFO âœ“ Item saved
// UIé€šçŸ¥: âœ“ Item saved
```

### åˆ†çº§ç®¡ç†

- **Info** - ä¸€èˆ¬ä¿¡æ¯æç¤º
- **Success** - æ“ä½œæˆåŠŸï¼ˆå¸¦âœ“å›¾æ ‡ï¼‰
- **Warning** - è­¦å‘Šä¿¡æ¯ï¼ˆå¸¦âš å›¾æ ‡ï¼‰
- **Error** - é”™è¯¯ä¿¡æ¯ï¼ˆå¸¦âœ—å›¾æ ‡ï¼‰

### çµæ´»ä½¿ç”¨

```rust
// åŒæ­¥æ“ä½œ - ç›´æ¥æ˜¾ç¤ºé€šçŸ¥
window.notify_success("Operation completed", cx);

// å¼‚æ­¥æ“ä½œ - ä»…è®°å½•æ—¥å¿—
NotificationSystem::debug("Background task started");
NotificationSystem::log_error("Task failed", error);
```

## ğŸ“Š ä¼˜åŒ–æ•ˆæœ

### ä»£ç ç®€åŒ–

**ä¼˜åŒ–å‰ï¼š**
```rust
tracing::info!("Item saved");
window.push_notification("Item saved successfully", cx);
```

**ä¼˜åŒ–åï¼š**
```rust
window.notify_success("Item saved successfully", cx);
```

### ä¸€è‡´æ€§æå‡

- æ‰€æœ‰é€šçŸ¥éƒ½å¸¦æœ‰ç»Ÿä¸€çš„å›¾æ ‡ï¼ˆâœ“ âš  âœ—ï¼‰
- æ—¥å¿—å’Œé€šçŸ¥æ¶ˆæ¯ä¿æŒä¸€è‡´
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ¨¡å¼

### å¯ç»´æŠ¤æ€§

- é›†ä¸­ç®¡ç†é€šçŸ¥é€»è¾‘
- æ˜“äºä¿®æ”¹é€šçŸ¥æ ·å¼
- ä¾¿äºæ·»åŠ æ–°çš„é€šçŸ¥ç±»å‹

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### 1. ç”¨æˆ·æ“ä½œåé¦ˆ

```rust
fn save_item(&mut self, window: &mut Window, cx: &mut Context<Self>) {
    match perform_save() {
        Ok(_) => window.notify_success("Item saved", cx),
        Err(e) => window.notify_error(format!("Save failed: {}", e), cx),
    }
}
```

### 2. å¼‚æ­¥æ“ä½œ

```rust
fn load_data(&mut self, cx: &mut Context<Self>) {
    cx.spawn(async move |_this, _cx| {
        NotificationSystem::debug("Loading data");
        
        match fetch_data().await {
            Ok(data) => {
                NotificationSystem::debug(format!("Loaded {} items", data.len()));
            }
            Err(e) => {
                NotificationSystem::log_error("Load failed", e);
            }
        }
    }).detach();
}
```

### 3. è¡¨å•éªŒè¯

```rust
fn validate_form(&mut self, window: &mut Window, cx: &mut Context<Self>) {
    if name.is_empty() {
        window.notify_warning("Name is required", cx);
        return;
    }
    
    window.notify_success("Form submitted", cx);
}
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
crates/mytool/src/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ mod.rs                    # æ·»åŠ äº† notification æ¨¡å—
â”‚   â””â”€â”€ notification.rs           # æ–°å¢ï¼šé€šçŸ¥ç³»ç»Ÿ
â””â”€â”€ ui/
    â””â”€â”€ components/
        â””â”€â”€ item_info.rs          # æ›´æ–°ï¼šä½¿ç”¨æ–°é€šçŸ¥ç³»ç»Ÿ

é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ é€šçŸ¥ç³»ç»Ÿä½¿ç”¨æŒ‡å—.md           # è¯¦ç»†ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ é€šçŸ¥ç³»ç»Ÿç¤ºä¾‹.rs               # å®é™…ä½¿ç”¨ç¤ºä¾‹
â”œâ”€â”€ é€šçŸ¥ç³»ç»Ÿä¼˜åŒ–æ€»ç»“.md           # æœ¬æ–‡ä»¶
â””â”€â”€ item_info_ä¼˜åŒ–å»ºè®®.md         # ç»„ä»¶ä¼˜åŒ–å»ºè®®
```

## ğŸš€ ä¸‹ä¸€æ­¥å»ºè®®

### 1. æ‰©å±•é€šçŸ¥ç±»å‹

å¯ä»¥æ·»åŠ æ›´å¤šé€šçŸ¥ç±»å‹ï¼š

```rust
pub enum NotificationLevel {
    Info,
    Success,
    Warning,
    Error,
    Loading,    // åŠ è½½ä¸­
    Progress,   // è¿›åº¦æç¤º
}
```

### 2. é€šçŸ¥æŒç»­æ—¶é—´

æ·»åŠ è‡ªå®šä¹‰é€šçŸ¥æ˜¾ç¤ºæ—¶é—´ï¼š

```rust
window.notify_success_with_duration("Item saved", Duration::from_secs(3), cx);
```

### 3. é€šçŸ¥é˜Ÿåˆ—ç®¡ç†

é¿å…åŒæ—¶æ˜¾ç¤ºè¿‡å¤šé€šçŸ¥ï¼š

```rust
NotificationQueue::push(notification);
NotificationQueue::set_max_visible(3);
```

### 4. å›½é™…åŒ–æ”¯æŒ

é›†æˆ i18nï¼š

```rust
window.notify_success(t!("item.saved"), cx);
```

### 5. è¿ç§»ç°æœ‰ä»£ç 

é€æ­¥å°†é¡¹ç›®ä¸­çš„å…¶ä»–ç»„ä»¶è¿ç§»åˆ°æ–°çš„é€šçŸ¥ç³»ç»Ÿï¼š

- `crates/mytool/src/ui/views/label/view.rs`
- `crates/mytool/src/ui/views/boards/*.rs`
- å…¶ä»–ä½¿ç”¨ `push_notification` çš„æ–‡ä»¶

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **ç”Ÿå‘½å‘¨æœŸ** - é€šçŸ¥æ¶ˆæ¯éœ€è¦ `'static` ç”Ÿå‘½å‘¨æœŸï¼Œä½¿ç”¨ `Into<String>` è€Œä¸æ˜¯ `AsRef<str>`

2. **Context vs App** - `Context<T>` å¯ä»¥é€šè¿‡ `cx` å‚æ•°ä¼ é€’ç»™ `notify_*` æ–¹æ³•

3. **å¼‚æ­¥æ“ä½œ** - åœ¨å¼‚æ­¥ä¸Šä¸‹æ–‡ä¸­åªä½¿ç”¨ `log_*` æ–¹æ³•ï¼Œé¿å…è·¨çº¿ç¨‹ä¼ é€’ window

4. **ç¼–è¯‘è­¦å‘Š** - å½“å‰æœ‰ä¸€äº›æœªä½¿ç”¨çš„æ–¹æ³•è­¦å‘Šï¼Œéšç€æ›´å¤šç»„ä»¶è¿ç§»ä¼šè‡ªç„¶æ¶ˆå¤±

## ğŸ‰ æ€»ç»“

æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªç»Ÿä¸€çš„é€šçŸ¥å’Œæ—¥å¿—ç³»ç»Ÿï¼Œå°† `tracing` æ—¥å¿—å’Œ GPUI çš„ `push_notification` å®Œç¾ç»“åˆï¼š

- âœ… ç®€åŒ–äº†ä»£ç 
- âœ… æå‡äº†ä¸€è‡´æ€§
- âœ… æ”¹å–„äº†ç”¨æˆ·ä½“éªŒ
- âœ… ä¾¿äºç»´æŠ¤å’Œæ‰©å±•

ç³»ç»Ÿå·²åœ¨ `item_info.rs` ä¸­æˆåŠŸåº”ç”¨ï¼Œå¯ä»¥ä½œä¸ºå…¶ä»–ç»„ä»¶çš„å‚è€ƒæ¨¡æ¿ã€‚
